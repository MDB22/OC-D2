\subsection{System Diagrams}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.85\linewidth]{\IMAGEPATH sw-arch}
	\caption{Software Architecture}
	\label{fig:sw-arch}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{\IMAGEPATH hw-arch}
	\caption{Hardware Architecture}
	\label{fig:hw-arch}
\end{figure}

\subsection{Aeronautical Requirements}
\subsubsection{Endurance and Speed Requirements}
In modeling the performance of our aircraft, we assume that the 2 takes-offs and 2 landings for the mission will average no more than 5 minutes each, including accepting the sample from Outback Joe. With 60 minutes allocated for the task, the aircraft must travel the transit corridor to Joe and back, 32 nautical miles, within 40 minutes. With this assumption, the aircraft must be capable of traveling at 48.6 knots. 

\subsubsection{Aircraft Capabilities}
\begin{itemize}
	\item[\textbf{Lift}] With out selection of motors and batteries, our UAV is capable of 4.5kg of lift, more than enough to lift the 2.5kg airframe, as well as accept the sample from Joe.
	\item[\textbf{Stall}] As mentioned in Section \ref{sec:intro}, our UAV is built on the Skywalker X8 airframe. The stall speed of our aircraft is estimated to be 25.3 knots, according to empirical data on the Skywalker X8.
	\item[\textbf{Speed}] The X8 has been demonstrated by many users to achieve airspeeds in excess of 75.5 knots using similar battery and motor selections.
	\item[\textbf{Endurance}] Battery tests have shown that 4 vertical take-off and landing maneuvers, reaching an altitude of 20ft, lasting 1-2 minutes each, consumes only XXXXXX\% battery. 
\end{itemize}

Prior to transitioning from hover to fixed-wing mode, the aircraft will align itself with wind, and the front rotors will be tilted at 30-45$^o$ to provide horizontal and vertical thrust. The aircraft will accelerate to above stall speed, at which the front rotors are fully rotated, completing the transition. To transition back to hover, the reverse operation is performed.\\

As the aircraft is not yet fully complete, the requirements above are estimation/calculations only. Full testing and validation will be performed prior to Deliverable 3, once the aircraft has progressed in development. At this point proper range and endurance tests to will be conducted get a better estimation of cruise speeds, take off, landing and sample pick up times, as well as maximum flight time.

\subsection{Flight Termination System}
\subsubsection{Design}

\subsubsection{State Machine}

\subsubsection{Analysis}
Effect of flight termination system (control surface positions, etc.)

Response to various failures.\\

Design, state machine and transitions.\\

Analysis of termination system capabilities.

\subsection{Geofence System}
Discuss processing of data, set up of Geofence around mission, implementation of soft Geofence.

Geofences are represented differently depending on plane or copter:
- Copter geofences are cylindrical
- Plane geofences are (up to) 18 point polygons

Approach 1 - Switching aircraft configuration mid-flight:
- Assign cylindrical geofence at base on startup
- Upon transition, assign full, polygonal geofence for transit corridor
- Upon reaching landing site and transitioning to copter, assign cylindrical geofence for landing site
- Transition, redefine transit corridor geofence and return to base
- Redefine cylindrical geofence and land at base

Approach 2 - Using only plane mode:
- Assign square polygon for base geofence
- Once in the air, assign new multi-point polygon for transit corridor (which should encompass base and landing site)
- Assign square polygon for landing sight once near GPS position
- Reassign transit corridor when back in the air
- Reassign base geofence when finish transit

We will most likely use approach 2, given what Bede has said regarding firmware implementation.

We also need to implement some procedure for implementing the ``soft geofence'', where we define a fake geofence smaller than the actual geofence, to help prevent us needing flight termination; needs research.

\subsection{Radio Equipment}
In order to perform low-bandwidth digital telemetry between the drone and ground station over distances up to 12.5km we have chosen to use an RFD900 long range telemetry kit. In accordance with the ACMA LIPD-2015 ISM Class License this kit allows us to operate in a spectrum that does not require any specialised qualifications or license fees. The transmitter itself is compliant with AS 4268:2008, and is therefore suitable for use under the class license.\\

This kit operates between 902 and 928MHz, however we will use the 915-928MHz band in order to meet class license specifications.  Additionally the kit will be run at 1 Watt EIRP with at least 20 frequency hopping channels. Operating under these conditions falls under LIPD-2015 item 54 â€“ Frequency Hopping Spread Spectrum transmitters.\\

If we find the low bandwidth telemetry link to be unreliable, a second transmitter will be added to provide communication redundancy. In accordance with the class license this will operate between 5725 and 5850MHz at 4 Watt EIRP, with at least frequency hopping 75 channels (LIPD-2015 item 57).